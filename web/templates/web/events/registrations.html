{% extends 'web/_base.html' %}
{% block title %}Registrations for {{ event.name }}{% endblock %}

{% block content %}
<h1>Registrations for {{ event.name }}</h1>
<div class="table-responsive">
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>State</th>
                <th>Submitted At</th>
                <th>Confirmed At</th>
                <th>Withdrawn At</th>
                <th>Ride</th>
                <th>Speed Range</th>
                <th>Ride Leader</th>
                <th>Emergency Contact</th>
                <th>Emergency Phone</th>
            </tr>
        </thead>
        <tbody>
            {% for reg in registrations %}
            <tr>
                <td>{{ reg.id }}</td>
                <td>{{ reg.name }}</td>
                <td>{{ reg.email }}</td>
                <td>{{ reg.state }}</td>
                <td>{{ reg.submitted_at|date:"Y-m-d H:i:s" }}</td>
                <td>{% if reg.confirmed_at %}{{ reg.confirmed_at|date:"Y-m-d H:i:s" }}{% else %}-{% endif %}</td>
                <td>{% if reg.withdrawn_at %}{{ reg.withdrawn_at|date:"Y-m-d H:i:s" }}{% else %}-{% endif %}</td>
                <td>{% if reg.ride %}{{ reg.ride.name }}{% else %}-{% endif %}</td>
                <td>{% if reg.speed_range_preference %}{{ reg.speed_range_preference.range }}{% else %}-{% endif %}</td>
                <td>
                    {% if reg.ride_leader_preference == 'y' %}
                        Yes
                    {% elif reg.ride_leader_preference == 'n' %}
                        No
                    {% else %}
                        N/A
                    {% endif %}
                </td>
                <td>{{ reg.emergency_contact_name|default:"-" }}</td>
                <td>{{ reg.emergency_contact_phone|default:"-" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %} 